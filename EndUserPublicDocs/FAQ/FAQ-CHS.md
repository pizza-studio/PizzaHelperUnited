# 披萨小助手常见问题解答（FAQ）

本文仅解答那些无法由《披萨小助手隐私政策》与《披萨小助手用户许可协议与免责声明（EULA）》回答的问题。

## // 安全疑虑与软件可靠性答疑

#### Q: 该怎么使用小工具（小组件）？有没有 watchOS 小工具？

披萨小助手从 v5.0.3 版开始对 watchOS 提供小工具。有关如何在 Apple 设备上使用小工具的资讯，请咨询 Apple 支持。请注意：小工具的功能可能会因不同的操作系统及其年度更新而有所不同。

#### Q: 披萨小助手有没有 Android 版本？

暂无开发 Android 版本之计划。

#### Q: 使用该工具是否会导致游戏账号被停权？

根据到目前为止的反馈来看，迄今为止尚无先例。根据热心玩家向米哈游专属客服的求证，得到的答覆是游戏账号不会被停权。（《披萨小助手用户许可协议与免责声明（EULA）》有提及：**开发者对于因用户行为所导致之任何损害不承担任何责任**。）

#### Q: 我通过披萨小助手登入米游社 / HoYoLAB 账号的过程是安全的吗？

披萨小助手**对米游社账号是采取 QRCode 扫码登入的、不会牵涉到账号盗取的嫌疑**；对 HoYoLAB 账号虽然需要密码登入，但用户对自己账号的密码输入是**直接由 iOS 系统的安全键盘接管（macOS 平台则是 SecureEventInput 模式从硬件层面接管所有的键盘输入讯号）、然后直接被 iOS / macOS 内建的 WKWebView 转交给 HoYoLAB 完成登入**、才产生了可以由披萨小助手在所处设备赖以使用的 Cookie。**整个登入过程当中，披萨小助手始终无权截获用户对密码的键盘输入**。感谢 Apple 一直以来致力于对资讯安全环境的营造。

#### Q: 披萨小助手会怎么处理用户的抽卡记录？

在《披萨小助手隐私政策》有提及：玩家的抽卡记录只会被披萨小助手存放在这三个位置：

- 阁下使用披萨小助手时之 Apple 数字设备。
- 以及该数字设备当时所已经登入使用 iCloud Drive 的 Apple ID 之自身的 iCloud 私有云空间。
- 以及任何被登入该 Apple ID 使用 iCloud Drive 且有安装披萨小助手之数字设备。

虽然披萨小助手允许用户导入、导出抽卡记录，但开发团队不建议您将这些资料上交给任何可能会擅自公开统计结果的第三方网站。

#### Q: 披萨小助手的哪些网络服务会受到外界不可抗力之影响？

至少有这几类服务会受到影响：

1. HoYoLAB 或米游社：实时便笺、个人战报、账簿、抽卡记录获取、角色库存清单、游戏活动。
2. Enka Networks：角色展柜。

所受支持的每款游戏在各自的大版本更新时，往往伴随着上述服务的暂时不可用。特别是 Enka Networks，每次版本维护大概需要一至两天的时间。

#### Q: 为什么有些功能被移除了？

被移除的功能大致是这几类：

- 与米游社 / HoYoLAB 既定功能重复、且无法在使用体验上做得比米游社 / HoYoLAB 更好的功能。例：游戏统计。
- 开发团队时间精力有限而无法维护的功能。例：披萨辞典。
- 有多种因素导致产品体验永远都无法做好、且没有可维护性的功能。例：深境螺旋榜单。

#### Q: 为什么我在商店升级了这个软件之后，很多功能反而不见了？甚至只有导出资料的功能？

本软件从 5.5.0 开始（watchOS App 则自 5.5.1 版本开始）恢复了对 OS21 ~ OS23 (也就是 iOS 14 ~ 16 和 macOS 11 ~ 13) 的可安装性，借此替换掉那些被放弃维护的旧版。这个决定是因为旧版（v4.x 为止的版本）有一些与资讯安全有关的疑虑、且我们没有其他手段可以干预。考虑到 OS23 用户群体的特殊性，我们仍向下移植了一些基础功能给 OS23 (iOS 16.2+, macOS 13.0+, watchOS 9.2+) 开始的用户使用。但 SwiftUI 在这些版本的系统内仍旧非常不成熟，难免会有使用上的故障。如果您的使用需求情形与经济能力允许的话，请换用至少支持 OS24+ 的设备。

## // App 与开发团队

#### Q: 我是胡桃工具箱（Snap Hutao）的使用者，请问在迁移到本应用时需要注意什么？这个 App 会像 Snap Hutao 那样被迫终止服务吗？

要导入 Snap Hutao 的难民数据，请在抽卡记录管理器中选择 UIGFv4 格式并加载 Snap Hutao 的 `Userdata.db` 数据库（由 Entity Framework Core 生成的 SQLite 数据库）。应用会读取该数据库并将所有抽卡记录转换为 UIGFv4 格式后导入。披萨小助手无法继承 Snap Hutao 的本地账号数据，您需要手动重新设定本地账号。

开发者无权为米哈游的决策背书。目前可以讲的是：从 App Store / TestFlight 安装的披萨小助手不包含对米哈游任何游戏进行运存注入（Memory Injection）的功能；Apple 不会允许此类行为，披萨小助手也从未实作过需要运存注入的功能。// 注：「运存」乃「电脑运行内存」的简体中文现代称谓，因为手机用户们往往并不知道他们口中的「内存」应该称为「手机硬盘空间」。

#### Q: 我是旧版原神披萨小助手（Pizza Helper 4 Genshin，v4 系列）的用户，且旧设备无法安装 iOS 17+。请问在跨设备迁移资料时该注意什么？

如果您的新旧设备使用相同 Apple ID 并启用 iCloud Drive，且 iCloud 空间充足，旧版的抽卡记录理论上可以通过 iCloud 迁移，但该过程并不保证始终成功。更稳妥的方式是：先在旧设备上将披萨小助手更新至 App Store 的最新版并按界面提示导出披萨难民数据（Pizza Refugee Data）；然后在新设备上运行新版披萨小助手，通过本地账号管理器导入本地账号数据，抽卡记录可通过 UIGF v4 格式导入。

#### Q: 我是星铁披萨小助手的用户，请问在迁移过来时需要注意什么？

一是资料同步：虽然基于统一披萨引擎的全新的披萨小助手可以通过 iCloud 读取到同一 Apple ID 下的星铁披萨小助手的云端资料，但同步读取资料是需要时间的、且可能受到包括网络连接状态等多方因素之影响。如希望能有更稳妥的迁移手段的话，您可以通过星铁披萨小助手将其本地账号全部导出为一个 JSON、再导入到目前的新版披萨小助手内。抽卡记录也可以用类似的手段迁移（使用 UIGF v4 格式）。

二是小工具（小组件）：全新的披萨小助手的所有看似给原神设计的小工具都是可以显示星穹铁道的内容的（洞天宝钱等原神专属小工具除外），直接在小工具设定里面选择您创建的星穹铁道专用的本地账号即可。依赖 iOS 内建的实时活动（Live Activity）功能实作的玩家体力计时器也可以用来显示星穹铁道的开拓力回满状态。对于小工具的自订壁纸的功能支持则是从 5.2.1 版更新开始支持，且无法继承之前的设定。详情请洽相关功能的介面文字说明。

#### Q: 披萨小助手的工作原理是什么？

米游社 / HoYoLAB 客户端应用（client app）会通过向米哈游 / Cognosphere 的服务器的后端请求游戏内的一些资讯。这个手段可以查询到一些与此有关的游戏状态资讯（比如玩家体力的回满进度，等）。披萨小助手使用您的 UID 与 Cookie 资讯可以重复这个查询过程、代替您使用这两款 App 向对应的服务器的后端请求游戏内的这些资讯、并展示于披萨小助手的主界面与小工具当中。《披萨小助手隐私政策》已经解释了与这些 Cookies 的使用有关的内容。

#### Q: 未来会收费吗？

米哈游不允许收费或植入收费广告，所以披萨小助手的所有功能都是免费提供开放使用的。

披萨小助手曾经接受过来自用户的自发捐赠（目前不再接受捐赠），且敝团队不会因此对捐赠者产生任何义务。这类捐赠内容会用于 App 开发、及其连带网络设施的维护。当然，通过 Apple App Store 发行软件所必须的 Apple Developer Program 会员身分的年费也会从这笔捐赠金报销。如有收到大宗捐赠的话，敝团队可能会公示他们的贡献。敝团队也可能会考虑在适当的时间点将用不完的经费捐赠给社会公益之用途。

#### Q: 小工具（小组件）是怎样自动更新玩家的账号的原粹树脂 / 开拓力 / 绝区电量状态的？

这些在披萨小助手被统称为「玩家体力（Stamina）」。从 5.0.4 版开始，披萨小助手的小工具每过一个玩家体力点恢复时间就会尝试向米游社 / HoYoLAB 服务器请求一次最新的实时便笺资料（里面包括了对应 UID 的原粹树脂 / 开拓力 / 绝区电量状态等资讯）。桌面小工具额外会有用于重载内容专用的刷新按钮。开启披萨小助手本体 App 时，所有小工具都会自动重新请求一次实时便笺资料。如果您未曾登入游戏消耗过玩家体力的话，理论上通过小工具显示的玩家体力的误差不会超过 1。

然而，对于3年以上的旧款iPhone机种来讲，哪怕有更换过新的电池，上述的小工具运作规律也会增加电力的消耗。因此，请在使用这类机种时尽量控制小工具的数量。

#### Q: 开发团队的自我介绍呢？如何解决其他疑问和讨论其他话题？

各位可以在披萨小助手的「关于」画面找到披萨小助手的 QQ 频道和 Discord 频道。从 2023 年四月开始，开发团队变成了三个人（Lava; Bill Haku; Shiki Suen），各位可以在「关于」画面的右上角点一下「开发组」就能看到他们的联络资料。因成员生涯计划各异的原因，从 2024 年 10 月 1 日起，该专案的程式开发由 Shiki Suen 单人维护。

#### Q: 请问何时会实作与绝区零有关的进阶功能？比如抽卡记录管理之类的。

开发团队分身乏术，无暇制作相关功能。本软件对绝区零的支持仅停留在「实时便笺」与「小组件」。其余功能请洽「米游社」「HoYoLAB」以及米哈游官方的绝区零微信小程序。

#### Q: 为什么更改语言设定后需要重启应用程式？

在 macOS/iOS 上更改 App 的 UI 语言设定时，App 需要重新启动，以确保新的语言设定生效。即使用户通过系统设定手动更改语言设定，仍然会提示需要重新启动 App，且届时这个提示将由 macOS/iOS 系统来发出，而非本 App。

我们在这里设定了语言切换器，以帮助用户节省几秒钟的时间。这种设计对注意力缺陷涣散障碍（ADHD）患者非常友好，因为 ADHD 患者在翻阅 iOS/macOS 系统设定中的多层页面时，往往容易彻底忘记他们原本要做的事情。

确认语言切换后，应用程式会自动退出，您需要手动重新启动应用程式。

某些功能（如系统通知、小工具等）需要重启 Springboard（在 iOS 上）或退出登录后重新登录（在 macOS 上）以应用此设定的变更。如果您觉得麻烦的话，您也可以直接重启设备。请注意，已排定的系统通知可能无法反映最新的 App 语言设定。

## // 技术故障与使用方法

> 本章节内容以披萨小助手 5.2.1 版开始的版本为讨论情形。

#### Q: HoYoLAB / 米游社面板相对于 Enka 面板而言有何差异？

Enka 面板的结果理论上是最准确的结果，但只能显示某个 UID 的公开展柜内的角色；而 HoYoLAB / 米游社面板则允许您以近乎相同的面板阅读体验来检视自己全部的在库角色。

由于后者可提供的后端资料有限，所以 HoYoLAB / 米游社面板内容有下述限制：

- 星穹铁道的武器在 20 & 30 & 40 & 50 & 60 & 70 级时没有任何办法判断是否有经过等级突破，只能以「尚未完成等级突破」为前提来推断此时的武器面板数据。
- 原神的部分角色可能会有「忘记统计某些角色自身突破所带来的特定元素的伤害增幅」的情况，届时请以「在游戏内将该角色移出队伍之后、游戏内显示的该角色的面板」为基准、来决定是否向 HoYoLAB / 米游社提报相关故障。
  - 注意：不将该角色移出队伍的话，队伍内不同的角色组合、乃至个别角色的天赋都有可能影响到游戏内显示的队员们的面板数值。
- 原神的查询结果无法将角色技能基础等级与命座天赋等级加成分开统计，因为拿到的原始数值就是经过合算的最终技能等级。

#### Q: iOS 锁屏小工具（小组件）无法加载出内容，怎么解决？

这有很大概率是小工具卡在资料获取状态了。可以进入锁屏小工具编辑状态，编辑对应的小工具的内容，重新选择本地账号（哪怕选择的还是之前的本地账号），这样可以触发锁屏小工具的内容更新流程。

#### Q: Apple Watch 无法从 iCloud 同步账号？

以 iOS 18 为例：先关闭披萨小助手的 iCloud 同步功能、再重新打开，并进入披萨小助手的本体应用、再静置一分钟，随后打开 Apple Watch App 尝试同步即可。具体操作方法为：在 iPhone 上点按「设定」-「你的 Apple 账号」-「iCloud」-「储存至 iCloud」，然后把页面往下翻，找到披萨小助手的开关，关掉之后再重新点开就可以了。

#### Q: 尝试添加小工具（小组件）时，找不到小工具。

请尝试重新启动系统后静置十分钟、不行的话再试试关闭再打开披萨小助手的通知，有较大概率解决。如果您在用 macOS 的且这样做之后该问题仍旧存在的话，请洽 Apple Support 让他们的专员引导您确认 App 是否被安装到了正确的位置、或者在不同的位置有重复安装。

#### Q: 错误码 -1（未获取到数据）或 错误码 10102、10103、10104（Cookie 与 UID 不对应）

检查是否开启米游社的实时便笺（或 HoYoLAB 的实时便笺）功能，并重新获取 Cookie。另请注意登入的账号本身是否正确。

#### Q: 错误码 10001 （Cookie 有误或 Cookie 失效）

建议将对应的本地账号重新登入。这个过程会重新获取 Cookie。

#### Q: 错误码 1008（UID 有误）

检查 UID 是否与您选择的服务器彼此对应（注意：是原神/星穹铁道/绝区零的UID，不是米游社通行证账号的 ID 数字）。如无法解决，请向我们反馈。另：披萨小助手自从 v5.0 版本开始，会在通过本地账号管理画面输入 UID 时自动尝试判定所属的服务器。

#### Q: 受米游社管辖的 UID 该如何自备设备指纹？

该功能需要对 iOS 版米游社 App 与米哈游服务器之间的通讯进行流量监听、获取 `x-rpc-device_fp` 字段。这种工具会为系统新增本地虚拟专用网络、来完成流量监听。

目前的唯一解决方案是由用户自己使用专门的流量监听工具来完成抓包工作。这里推荐 Stream Lab Inc. 开发的「Stream」这款专门用来抓包的 iOS 应用。

因为抓到的内容属于个人资讯，所以需要用户亲自完成。抓到的自己的设备的指纹也请仅供自己使用。

#### Q: 该怎样处理 Paimon.moe 的抽卡记录格式？

由于该网站提供的 Excel 抽卡记录格式缺失了太多关键资讯栏位（都是 UIGFv4 规定的），我们在此前针对原神披萨小助手实装 UIGFv4 支持的时候就已经彻底放弃了对 Paimon.moe 的私有 Excel 格式的支持。如果您有将资料读入披萨小助手等 UIGFv4 标准的应用内的需求，请向 Paimon.moe 提出建议。

#### Q: 该怎样针对「星穹铁道 UID」以及「受 HoYoLAB 管辖的原神 UID」获取抽卡记录 URL？

该功能需要对这些游戏客户端（包括米哈游的云游戏）与米哈游服务器之间的通讯进行流量监听、筛选任何包含特定字段与域名的网址。这种工具会为系统新增本地虚拟专用网络、来完成流量监听。

目前的唯一解决方案是由用户亲自使用专门的流量监听工具来完成抓包工作。

- 如果您用的是 iOS 的话，这里推荐 Stream Lab Inc. 开发的「Stream」这款专门用来抓包的 iOS 应用。
- Windows 与 macOS 系统的抓包工具太多，不作赘述。

抓包规则就是筛选所有包含「`/api/getGachaLog`」路径内容的 URL。不同游戏的不同区服的抽卡网址的域名均以「`public-operation`」开头：

- 受米游社管辖的 UID 的抽卡网址的域名均以 `mihoyo.com` 结尾。
- 受 HoYoLAB 管辖的 UID 的抽卡网址的域名均以 `hoyoverse.com` 结尾。

抓包时需要用户在开启流量监听状态的情况下打开游戏内的抽卡记录（祈愿/跃迁记录）页面。

您抓取的网址的有效期可能只有一到两个小时，请尽快使用。

您抓取到的网址与资料属于您的个人隐私，请慎重考虑是否将相关数据分享给其他人。

#### Q: 为什么每次重新启动我的 iOS 设备后，本地账号都会消失？虽然大约 30 秒后可能会恢复，但仍然让人感到困扰。

披萨小助手预设使用「群组容器」来存储本地账号（且有专供小工具存取的 UserDefaults 镜照副本）。如果您遇到此问题，可以按照以下步骤操作：

1. 前往「本地账号管理器 -> 选单（位于界面右上角）」并使用相关选单选项将所有本地账号导出为备份文件。在完成步骤 2 后，您需要使用此备份文件将本地账号重新导入到披萨小助手内。
2. 在相同的选单中，进入「进阶选项」并将「本地账号存储位置」切换为「应用程序容器」。切换此选项后，披萨小助手会自动退出。
3. 将本地账号导入到披萨小助手内。此选项位于步骤 1 所述的选单中。

这是针对此问题的一个经过验证的解决方法。

#### Q: 抽卡统计中的「常驻命中率可信度」功能是什么？

披萨小助手的「常驻命中率可信度」功能为抽卡游戏中的常驻物品命中率计算提供可靠性指标。此功能帮助用户根据可用数据量了解其抽卡统计的可信程度。

**可信度级别与阈值：**

可信度由可用于分析的相关五星抽取次数决定：

- **可信度高**：≥10次 - 计算出的常驻命中率高度可靠
- **可信度中等**：5-9次 - 计算出的常驻命中率具有中等可靠性
- **可信度低**：3-4次 - 计算出的常驻命中率可靠性有限
- **数据量不足**：<3次 - 数据不足以提供有意义的计算

**如何解读可信度级别：**

- **可信度高**的结果可放心用于制定游戏决策
- **可信度中等**的结果提供有用指导，但应结合其他因素考虑
- **可信度低**的结果应谨慎解读，因为可能不具代表性
- **数据量不足**表示您需要更多抽卡次数才能计算出有意义的统计数据

**可信度不足的常见原因：**

- 抽卡历史中五星抽取次数太少
- 抽卡记录不完整（缺少历史数据）
- 最近才开始记录抽卡次数
- 统计结果超出理论上限（>50%）

**技术细节：**

当您在抽卡统计部分看到可信度指标时，可以点击它查看详细说明。这会弹出一个消息窗口来解释与可信度指标有关的说明。

可信度计算考虑了抽卡机制的复杂性，包括保底系统以及常驻物品与限定物品的区别，确保可靠性评估反映您数据的实际统计意义。

注意：即使显示「可信度高」，最终解释权仍属于米哈游，米哈游对概率计算方法也拥有最终解释权、且优先于本应用的计算方法。

$ EOF.
